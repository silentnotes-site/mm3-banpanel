<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8">
<title>Ban Panel</title>
<style>
body { font-family: Arial, sans-serif; background: #0f172a; color: white; text-align: center; padding: 30px; }
h1 { color: #38bdf8; }
#loginForm, #adminPanel { background: #1e293b; padding: 20px; margin: 20px auto; border-radius: 12px; width: 450px; transition: all 0.5s ease; }
input, textarea { width: 90%; padding: 10px; margin: 10px 0; border-radius: 6px; border: none; }
button { padding: 10px 20px; background: #38bdf8; border: none; color: black; font-weight: bold; border-radius: 6px; cursor: pointer; transition: all 0.3s ease; }
button:hover { background: #0ea5e9; transform: scale(1.05); }
.log-item { background: #334155; padding: 10px; margin: 10px 0; border-radius: 6px; display: flex; align-items: center; animation: fadeIn 0.5s; }
.log-item img { width: 50px; height: 50px; border-radius: 50%; margin-right: 10px; }
.log-info { text-align: left; }
@keyframes fadeIn { from {opacity:0} to {opacity:1} }
</style>
</head>
<body>
<h1>Ban Panel</h1>
<div id="loginForm">
<input type="password" id="adminPassword" placeholder="Password admin">
<button onclick="login()">Accedi</button>
</div>
<div id="adminPanel" style="display:none;">
<form id="banForm">
<input type="text" id="username" placeholder="Username" required>
<input type="text" id="reason" placeholder="Motivo" required>
<textarea id="notes" placeholder="Moderator notes"></textarea>
<input type="text" id="duration" placeholder="Durata (s o inf)" required>
<button type="submit">Banna</button>
</form>
<div class="logs">
<h2>Logs Bannati</h2>
<div id="logsList"></div>
</div>
</div>
<script>
let PASSWORD = "SuperSecretAdminPassword123"
async function getUserId(username){
const res=await fetch("https://users.roblox.com/v1/usernames/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usernames:[username]})})
const data=await res.json()
return data.data[0]?.id
}
function getAvatarUrl(id){return`https://www.roblox.com/headshot-thumbnail/image?userId=${id}&width=50&height=50&format=png`}
function login(){
const pass=document.getElementById("adminPassword").value
if(pass===PASSWORD){
document.getElementById("loginForm").style.display="none"
document.getElementById("adminPanel").style.display="block"
fetchLogs()
}else{alert("Password errata")}}
const form=document.getElementById("banForm")
const logsList=document.getElementById("logsList")
async function fetchLogs(){
const pass=document.getElementById("adminPassword").value
const res=await fetch("/logs",{headers:{"x-admin-password":pass}})
if(!res.ok)return
const bans=await res.json()
logsList.innerHTML=""
for(let ban of bans){
let id=await getUserId(ban.username)
let avatar=id?getAvatarUrl(id):""
const div=document.createElement("div")
div.className="log-item"
div.innerHTML=`<img src="${avatar}" alt="avatar"><div class="log-info"><b>${ban.username}</b><br>Motivo: ${ban.reason}<br>Note: ${ban.notes}<br>Durata: ${ban.duration}<br><button onclick="unban('${ban.username}')">Unban</button></div>`
logsList.appendChild(div)}}
async function unban(username){
const pass=document.getElementById("adminPassword").value
await fetch("/unban",{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":pass},body:JSON.stringify({username})})
fetchLogs()
}
form.addEventListener("submit",async e=>{
e.preventDefault()
const pass=document.getElementById("adminPassword").value
const username=document.getElementById("username").value
const reason=document.getElementById("reason").value
const notes=document.getElementById("notes").value
const duration=document.getElementById("duration").value
await fetch("/ban",{method:"POST",headers:{"Content-Type":"application/json","x-admin-password":pass},body:JSON.stringify({username,reason,notes,duration})})
fetchLogs()
})
</script>
</body>
</html>
